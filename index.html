<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Köpek İsmi Tahmini</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        .grid { display: grid; grid-template-columns: repeat(5, 50px); gap: 5px; justify-content: center; margin-top: 20px; }
        .cell { width: 50px; height: 50px; display: flex; align-items: center; justify-content: center; font-size: 24px; border: 2px solid #333; }
        .green { background-color: #4CAF50; color: white; }
        .yellow { background-color: #FFC107; }
        .gray { background-color: #DDD; }
        #dog-info { margin-top: 20px; text-align: center; }
        #dog-info img { width: 300px; height: auto; border-radius: 10px; }
    </style>
</head>
<body>
    <h1>Köpek İsmi Tahmini</h1>
    <p>Köpek ismini tahmin edin!</p>
    <input type="text" id="guess">
    <button onclick="checkGuess()">Tahmin Yap</button>
    <div id="grid-container"></div>
    <p id="message"></p>
    <button id="restartBtn" onclick="restartGame()" style="display: none;">Tekrar Başla</button>

    <div id="dog-info" style="display: none;">
        <h3>Köpek Bilgisi:</h3>
        <img id="dog-image" src="" alt="Köpek Resmi">
        <p id="dog-description"></p>
    </div>

    <script>
        let secretWord = ""; // Başlangıçta boş
        let attempts = 0;
        const maxAttempts = 6;
        const gridContainer = document.getElementById("grid-container");
        const guessInput = document.getElementById("guess");
        const restartBtn = document.getElementById("restartBtn");
        const dogInfoDiv = document.getElementById("dog-info");
        const dogImage = document.getElementById("dog-image");
        const dogDescription = document.getElementById("dog-description");

        async function fetchRandomDogBreed() {
            try {
                const response = await fetch("https://dog.ceo/api/breeds/list/all");
                const data = await response.json();
                const breeds = Object.keys(data.message); // Tüm köpek ırklarını al
                secretWord = breeds[Math.floor(Math.random() * breeds.length)].toLowerCase(); // Rastgele bir köpek ismi seç

                // Tahminin uzunluğunu belirle
                guessInput.maxLength = secretWord.length;
            } catch (error) {
                console.error("API hatası:", error);
                alert("Köpek verisi alınamadı. Lütfen tekrar deneyin.");
            }
        }

        async function fetchDogInfo(breed) {
            try {
                const response = await fetch(`https://dog.ceo/api/breed/${breed}/images/random`);
                const data = await response.json();
                const dogImageUrl = data.message;
                dogImage.src = dogImageUrl;

                // Köpek hakkında açıklama ekleyelim
                dogDescription.textContent = `${breed.charAt(0).toUpperCase() + breed.slice(1)} köpeği hakkında bazı bilgiler...`;
                dogInfoDiv.style.display = "block";
            } catch (error) {
                console.error("Köpek bilgisi alınamadı:", error);
            }
        }

        // Sayfa yüklendiğinde köpek verisini al
        fetchRandomDogBreed();

        function checkGuess() {
            const guess = guessInput.value.toLowerCase();
            if (guess.length === 0) {
                alert("Bir tahminde bulunun!");
                return;
            }

            if (guess.length !== secretWord.length) {
                alert(`Lütfen ${secretWord.length} harfli bir kelime girin!`);
                return;
            }

            let row = document.createElement("div");
            row.className = "grid";

            // Kullanıcı girdiği harfleri tek tek kontrol et
            for (let i = 0; i < guess.length; i++) {
                let cell = document.createElement("div");
                cell.className = "cell";
                cell.textContent = guess[i];

                if (guess[i] === secretWord[i]) {
                    cell.classList.add("green");
                } else if (secretWord.includes(guess[i])) {
                    cell.classList.add("yellow");
                } else {
                    cell.classList.add("gray");
                }
                row.appendChild(cell);
            }

            gridContainer.appendChild(row);
            attempts++;
            guessInput.value = "";

            if (guess === secretWord) {
                document.getElementById("message").textContent = "Tebrikler! Doğru tahmin: " + secretWord;
                guessInput.disabled = true;
                fetchDogInfo(secretWord); // Doğru tahmin yapıldığında köpek bilgilerini göster
                restartBtn.style.display = "block"; // Tekrar başla butonunu göster
            } else if (attempts >= maxAttempts) {
                document.getElementById("message").textContent = "Oyun bitti! Doğru kelime: " + secretWord;
                guessInput.disabled = true;
                fetchDogInfo(secretWord); // Oyun bittiğinde doğru köpek bilgilerini göster
                restartBtn.style.display = "block"; // Tekrar başla butonunu göster
            }
        }

        function restartGame() {
            // Oyunu sıfırla
            attempts = 0;
            gridContainer.innerHTML = ""; // Eskileri temizle
            dogInfoDiv.style.display = "none"; // Köpek bilgisi kısmını gizle
            document.getElementById("message").textContent = "";
            guessInput.disabled = false;
            guessInput.value = "";
            restartBtn.style.display = "none"; // Tekrar başla butonunu gizle

            // Yeni bir köpek ismi al
            fetchRandomDogBreed();
        }
    </script>
</body>
</html>
